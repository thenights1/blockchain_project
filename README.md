# 区块链项目文档
### 功能要求：
1. 多节点协作和网络通信： 创建多个节点，每个节点能够通过网络通信。使用合适的RPC方式确保支持以下区块链交互指令：

- 添加新交易到待处理池；

- 提交区块到共识过程；

- 获取特定交易或区块的信息；

- 执行节点之间的同步操作；

2. 数据结构和存储： 实现交易、区块和区块链的数据结构，并提供数据库或文件存储机制来持久化这些数据；

3. PBFT共识： 集成PBFT作为共识机制，实现PBFT算法中的预准备、准备、提交等步骤，可以处理拜占庭错误；

4. 轮换主节点： 提供主节点轮换机制；

5. 交易验证： 实现ECDSA签名验证，以确保交易的真实性和完整性。

6. 你认为有意思的区块链功能：任选1项未指明的内容（不包括BloomFilter）
### 开发要求：
使用Golang编程语言，利用其并发编程特性来构建多节点区块链系统；

确保系统具备足够的并发能力，以支持高效的区块链交互和PBFT共识算法；

可以合理使用第三方库来加速开发，提高系统的稳定性和性能；

允许使用AI工具，但需理解代码设计，并在项目报告中说明；

----------------------------------------------------------------------------------

## 项目设计主体思想
1. 区块链是一个由区块组成的链，需要先创建一个创世区块，然后之后的区块保存前一个区块的哈希值来确保连成一条链。
2. 区块用结构体来保存，里面应包含的数据有：区块序号、前一个区块的哈希值、所存储的交易池、创建时的时间戳，便于顺序增加区块链的长度
3. 交易也应用结构体来保存，里面包含的数据有：
4. 结点是接收交易的主体，也需要用结构体来保存数据，其中应包含的数据有：
   - 结点id，用来唯一标记结点
   - 待处理池，应当是一个以交易结构体为元素的数组
   - 共识机制，pbft的结构体，利用其来调用一些共识机制里面的函数
   - 一条区块链，也就是主链，所有的结点共同拥有
   - 互斥锁，用来保证并发过程的安全
   - 同步标志，来标记是否已经被同步过
5. 用户发起交易这一过程拟用main函数来进行模拟。

## 关于PBFT
PBFT（Practical Byzantine Fault Tolerance）是一种拜占庭容错共识算法，旨在解决分布式系统中存在恶意节点或节点失效的问题。以下是PBFT的主要过程：
- 视图切换： PBFT中引入了“视图（view）”的概念。系统的运行被划分为一系列视图，每个视图有一个主节点（primary）。节点按照一定的轮换机制充当主节点，轮流提出新的区块。
- 请求预准备（Pre-Prepare）： 当一个节点（主节点）收到客户端的请求时，它首先会在当前视图中提出一个预准备消息，包含了提出的区块和一些其他信息。其他节点收到预准备消息后，验证提出的区块的合法性，并在达成共识的情况下向其他节点广播准备消息。
- 准备（Prepare）： 节点在接收到足够数量的预准备消息后，会向其他节点广播准备消息，表明它已经对提出的区块进行了验证。其他节点在接收到足够数量的准备消息后，也会广播准备消息。
- 提交（Commit）： 当一个节点收到足够数量的准备消息后，它可以向其他节点广播提交消息，表示它已经对提出的区块达成了共识。其他节点在接收到足够数量的提交消息后，也会提交该区块。
- 视图切换和重试： 如果节点在某个视图中无法达成共识，系统将进行视图切换，选择下一个主节点，并重新开始共识过程。这有助于应对主节点的故障或恶意行为。
- 状态机执行： 一旦一个区块被提交，每个节点都会将该区块中的交易应用于其本地状态机，从而确保所有节点都具有相同的状态。
